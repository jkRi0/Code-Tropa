<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Storage</title>
</head>
<body>
    <h1>Local Storage Operations (Client-Side)</h1>
    <div>
        <label for="localStorageKey">Key:</label>
        <input type="text" id="localStorageKey" placeholder="Enter key">
        <label for="localStorageValue">Value:</label>
        <input type="text" id="localStorageValue" placeholder="Enter value">
        <button onclick="createLocalStorageItem(document.getElementById('localStorageKey').value, document.getElementById('localStorageValue').value)">Create/Update</button>
        <button onclick="readLocalStorageItem(document.getElementById('localStorageKey').value)">Read</button>
        <button onclick="deleteLocalStorageItem(document.getElementById('localStorageKey').value)">Delete</button>
    </div>

    <h1>Session Storage Operations (Client-Side)</h1>
    <div>
        <label for="sessionStorageKey">Key:</label>
        <input type="text" id="sessionStorageKey" placeholder="Enter key">
        <label for="sessionStorageValue">Value:</label>
        <input type="text" id="sessionStorageValue" placeholder="Enter value">
        <button onclick="createSessionStorageItem(document.getElementById('sessionStorageKey').value, document.getElementById('sessionStorageValue').value)">Create/Update</button>
        <button onclick="readSessionStorageItem(document.getElementById('sessionStorageKey').value)">Read</button>
        <button onclick="deleteSessionStorageItem(document.getElementById('sessionStorageKey').value)">Delete</button>
    </div>

    <script src="localStorage.js"></script>
    <script src="sessionStorage.js"></script>

    <h1>Cookie Operations (Server-Side - PHP)</h1>
    <div>
        <label for="cookieKey">Key:</label>
        <input type="text" id="cookieKey" placeholder="Enter key">
        <label for="cookieValue">Value:</label>
        <input type="text" id="cookieValue" placeholder="Enter value">
        <button onclick="handleCookieAction('createOrUpdate')">Create/Update</button>
        <button onclick="handleCookieAction('read')">Read</button>
        <button onclick="handleCookieAction('delete')">Delete</button>
    </div>

    <script>
        async function handleCookieAction(action) {
            const key = document.getElementById('cookieKey').value;
            const value = document.getElementById('cookieValue').value;

            const formData = new FormData();
            formData.append('action', action);
            formData.append('key', key);
            if (action === 'createOrUpdate') {
                formData.append('value', value);
            }

            try {
                const response = await fetch('cookies.php', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                console.log(`Cookie action "${action}" result:`, data);
                if (action === 'read' && data.status === 'success') {
                    alert(`Cookie value for key "${key}": ${data.value}`);
                } else {
                    alert(data.message);
                }
            } catch (error) {
                console.error('Error during cookie operation:', error);
                alert('An error occurred during the cookie operation.');
            }
        }
    </script>

    <h1>Session Operations (Server-Side - PHP)</h1>
    <div>
        <label for="sessionKey">Key:</label>
        <input type="text" id="sessionKey" placeholder="Enter key">
        <label for="sessionValue">Value:</label>
        <input type="text" id="sessionValue" placeholder="Enter value">
        <button onclick="handleSessionAction('createOrUpdate')">Create/Update</button>
        <button onclick="handleSessionAction('read')">Read</button>
        <button onclick="handleSessionAction('delete')">Delete</button>
        <button onclick="handleSessionAction('destroy')">Destroy All Sessions</button>
    </div>

    <script>
        async function handleSessionAction(action) {
            const key = document.getElementById('sessionKey').value;
            const value = document.getElementById('sessionValue').value;

            const formData = new FormData();
            formData.append('action', action);
            if (action !== 'destroy') {
                formData.append('key', key);
                if (action === 'createOrUpdate') {
                    formData.append('value', value);
                }
            }

            try {
                const response = await fetch('session.php', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                console.log(`Session action "${action}" result:`, data);
                if (action === 'read' && data.status === 'success') {
                    alert(`Session value for key "${key}": ${data.value}`);
                } else {
                    alert(data.message);
                }
            } catch (error) {
                console.error('Error during session operation:', error);
                alert('An error occurred during the session operation.');
            }
        }
    </script>

    <h1>Client-Side Cookie Operations (JavaScript)</h1>
    <div>
        <label for="jsCookieKey">Key:</label>
        <input type="text" id="jsCookieKey" placeholder="Enter key">
        <label for="jsCookieValue">Value:</label>
        <input type="text" id="jsCookieValue" placeholder="Enter value">
        <button onclick="createJSCookie(document.getElementById('jsCookieKey').value, document.getElementById('jsCookieValue').value)">Create/Update</button>
        <button onclick="readJSCookie(document.getElementById('jsCookieKey').value)">Read</button>
        <button onclick="deleteJSCookie(document.getElementById('jsCookieKey').value)">Delete</button>
    </div>

    <script>
        function createJSCookie(key, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = key + "=" + (value || "") + expires + "; path=/";
            console.log(`Client-side cookie "${key}" created/updated.`);
            alert(`Client-side cookie "${key}" created/updated.`);
        }

        function readJSCookie(key) {
            const nameEQ = key + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) {
                    const value = c.substring(nameEQ.length, c.length);
                    console.log(`Client-side cookie value for key "${key}": ${value}`);
                    alert(`Client-side cookie value for key "${key}": ${value}`);
                    return value;
                }
            }
            console.log(`Client-side cookie "${key}" not found.`);
            alert(`Client-side cookie "${key}" not found.`);
            return null;
        }

        function deleteJSCookie(key) {
            document.cookie = key + "=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/";
            console.log(`Client-side cookie "${key}" deleted.`);
            alert(`Client-side cookie "${key}" deleted.`);
        }
    </script>
</body>
</html>